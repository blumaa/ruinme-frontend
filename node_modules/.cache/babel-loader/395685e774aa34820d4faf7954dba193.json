{"ast":null,"code":"var _jsxFileName = \"/Users/flatironschool/Development/code/MOD4/ruinme/ruinme-frontend/src/components/SignUpForm.jsx\";\nimport React, { Component } from 'react';\nimport { Button, Form } from 'semantic-ui-react';\nimport { fetchCurrentUser } from '../store/actions/users';\nimport { connect } from 'react-redux';\nimport ActiveStorageProvider from \"react-activestorage-provider\";\nconst SIGN_UP = \"http://localhost:3001/sign_up\";\n\nclass SignUpForm extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      email: \"snap@gmail.com\",\n      display_name: \"snap\",\n      age: 90,\n      gender: \"meh\",\n      bio: \"this is the bio\",\n      password: \"12345\",\n      passwordConfirm: \"12345\",\n      looking_for: \"1111\",\n      //default to looking for everything\n      zip_code: \"33332\"\n    };\n\n    this.handleSubmit = async e => {\n      console.log('avatar files', e.target[6].files);\n      const avatar = e.target[6].files;\n      const formData = new FormData();\n      var user = {\n        email: this.state.email\n      };\n      console.log('user', user); // formData.append('user', user)\n\n      formData.append(\"username\", \"Groucho\");\n      formData.append('email', this.state.email);\n      formData.append('display_name', this.state.display_name);\n      formData.append('age', this.state.age);\n      formData.append('password', this.state.password);\n      formData.append('passwordConfirm', this.state.passwordConfirm);\n      formData.append('looking_for', this.state.looking_for);\n      formData.append('zip_code', this.state.zip_code);\n      formData.append('avatar', avatar);\n      console.log('formData', formData);\n      /* const newUser = {...this.state, avatar: avatar}\n       delete newUser.passwordConfirm\n      console.log('check out this new user obje', newUser) */\n      // const payload = {user: formData}\n\n      console.log('payload', payload);\n      const req = {\n        method: 'POST',\n        body: formData\n      };\n      const resp = await fetch(\"http://localhost:3001/sign_up\", req);\n      const data = await resp.json();\n      console.log(data, data.user, data.token);\n      localStorage.setItem('token', data.token);\n      this.props.getCurrentUser();\n      this.props.history.push('/explore');\n    };\n\n    this.handleChange = event => {\n      const name = event.target.name;\n      const input = event.target.value;\n      this.setState({\n        [name]: input\n      });\n    };\n\n    this.validatePassword = () => {\n      const regEx = /^(?=.*[A-Za-z])(?=.*\\d)[A-Za-z\\d]{8,}$/;\n      return regEx.test(this.state.password);\n    };\n\n    this.matchPasswords = () => {\n      return this.state.password === this.state.passwordConfirm;\n    };\n  }\n\n  render() {\n    const passwordsMatch = this.state.password === this.state.passwordConfirm ? \"Passwords match\" : \"Passwords MUST match\";\n    return React.createElement(Form, {\n      onSubmit: this.handleSubmit,\n      onChange: this.handleChange,\n      className: \"ui main\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, React.createElement(Form.Input, {\n      label: \"Email\",\n      type: \"email\",\n      name: \"email\",\n      id: \"email-field\",\n      value: this.state.email,\n      required: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }), React.createElement(Form.Input, {\n      label: \"Display Name\",\n      name: \"display_name\",\n      value: this.state.display_name,\n      id: \"display-name-field\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }), React.createElement(Form.Input, {\n      label: \"Age\",\n      name: \"age\",\n      min: \"18\",\n      id: \"age-field\",\n      value: this.state.age,\n      type: \"number\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }), React.createElement(Form.Input, {\n      label: \"Gender\",\n      name: \"gender\",\n      id: \"gender-field\",\n      value: this.state.gender,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }), React.createElement(Form.Input, {\n      label: \"Zip Code\",\n      name: \"zip_code\",\n      id: \"zip-field\",\n      value: this.state.zip_code,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }), React.createElement(Form.TextArea, {\n      label: \"Bio\",\n      name: \"bio\",\n      id: \"bio-field\",\n      value: this.state.bio,\n      required: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }), React.createElement(Form.Input, {\n      type: \"file\",\n      label: \"Avatar\",\n      name: \"avatar\",\n      id: \"avatar\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }), React.createElement(Form.Input, {\n      label: \"Enter Password\",\n      name: \"password\",\n      type: \"password\",\n      id: \"password-field\",\n      value: this.state.password,\n      required: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }), React.createElement(Form.Input, {\n      label: passwordsMatch,\n      name: \"passwordConfirm\",\n      type: \"password\",\n      id: \"confirm-password-field\",\n      value: this.state.passwordConfirm,\n      required: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }), React.createElement(Button, {\n      type: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    }, \"Submit\"));\n  }\n\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    getCurrentUser: () => dispatch(fetchCurrentUser())\n  };\n};\n\nexport default connect(null, mapDispatchToProps)(SignUpForm);","map":{"version":3,"sources":["/Users/flatironschool/Development/code/MOD4/ruinme/ruinme-frontend/src/components/SignUpForm.jsx"],"names":["React","Component","Button","Form","fetchCurrentUser","connect","ActiveStorageProvider","SIGN_UP","SignUpForm","state","email","display_name","age","gender","bio","password","passwordConfirm","looking_for","zip_code","handleSubmit","e","console","log","target","files","avatar","formData","FormData","user","append","payload","req","method","body","resp","fetch","data","json","token","localStorage","setItem","props","getCurrentUser","history","push","handleChange","event","name","input","value","setState","validatePassword","regEx","test","matchPasswords","render","passwordsMatch","mapDispatchToProps","dispatch"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,MAAT,EAAiBC,IAAjB,QAA6B,mBAA7B;AACA,SAASC,gBAAT,QAAiC,wBAAjC;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,OAAOC,qBAAP,MAAkC,8BAAlC;AAGA,MAAMC,OAAO,GAAG,+BAAhB;;AACA,MAAMC,UAAN,SAAyBP,SAAzB,CAAmC;AAAA;AAAA;AAAA,SAE/BQ,KAF+B,GAEvB;AACJC,MAAAA,KAAK,EAAE,gBADH;AAEJC,MAAAA,YAAY,EAAE,MAFV;AAGJC,MAAAA,GAAG,EAAE,EAHD;AAIJC,MAAAA,MAAM,EAAE,KAJJ;AAKJC,MAAAA,GAAG,EAAE,iBALD;AAMJC,MAAAA,QAAQ,EAAE,OANN;AAOJC,MAAAA,eAAe,EAAE,OAPb;AAQJC,MAAAA,WAAW,EAAE,MART;AAQiB;AACrBC,MAAAA,QAAQ,EAAE;AATN,KAFuB;;AAAA,SAc/BC,YAd+B,GAchB,MAAOC,CAAP,IAAa;AACxBC,MAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ,EAA4BF,CAAC,CAACG,MAAF,CAAS,CAAT,EAAYC,KAAxC;AACA,YAAMC,MAAM,GAAGL,CAAC,CAACG,MAAF,CAAS,CAAT,EAAYC,KAA3B;AACA,YAAME,QAAQ,GAAG,IAAIC,QAAJ,EAAjB;AACA,UAAIC,IAAI,GAAG;AACTlB,QAAAA,KAAK,EAAE,KAAKD,KAAL,CAAWC;AADT,OAAX;AAGAW,MAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ,EAAoBM,IAApB,EAPwB,CAQxB;;AAGAF,MAAAA,QAAQ,CAACG,MAAT,CAAgB,UAAhB,EAA4B,SAA5B;AACAH,MAAAA,QAAQ,CAACG,MAAT,CAAgB,OAAhB,EAAyB,KAAKpB,KAAL,CAAWC,KAApC;AACAgB,MAAAA,QAAQ,CAACG,MAAT,CAAgB,cAAhB,EAAgC,KAAKpB,KAAL,CAAWE,YAA3C;AACAe,MAAAA,QAAQ,CAACG,MAAT,CAAgB,KAAhB,EAAuB,KAAKpB,KAAL,CAAWG,GAAlC;AACAc,MAAAA,QAAQ,CAACG,MAAT,CAAgB,UAAhB,EAA4B,KAAKpB,KAAL,CAAWM,QAAvC;AACAW,MAAAA,QAAQ,CAACG,MAAT,CAAgB,iBAAhB,EAAmC,KAAKpB,KAAL,CAAWO,eAA9C;AACAU,MAAAA,QAAQ,CAACG,MAAT,CAAgB,aAAhB,EAA+B,KAAKpB,KAAL,CAAWQ,WAA1C;AACAS,MAAAA,QAAQ,CAACG,MAAT,CAAgB,UAAhB,EAA4B,KAAKpB,KAAL,CAAWS,QAAvC;AACAQ,MAAAA,QAAQ,CAACG,MAAT,CAAgB,QAAhB,EAA0BJ,MAA1B;AACAJ,MAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwBI,QAAxB;AACA;;;AAIA;;AACAL,MAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ,EAAuBQ,OAAvB;AACA,YAAMC,GAAG,GAAG;AACRC,QAAAA,MAAM,EAAE,MADA;AAERC,QAAAA,IAAI,EAAEP;AAFE,OAAZ;AAIA,YAAMQ,IAAI,GAAG,MAAMC,KAAK,CAAC,+BAAD,EAAkCJ,GAAlC,CAAxB;AACA,YAAMK,IAAI,GAAG,MAAMF,IAAI,CAACG,IAAL,EAAnB;AACAhB,MAAAA,OAAO,CAACC,GAAR,CAAYc,IAAZ,EAAkBA,IAAI,CAACR,IAAvB,EAA6BQ,IAAI,CAACE,KAAlC;AACAC,MAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BJ,IAAI,CAACE,KAAnC;AACA,WAAKG,KAAL,CAAWC,cAAX;AACA,WAAKD,KAAL,CAAWE,OAAX,CAAmBC,IAAnB,CAAwB,UAAxB;AACH,KAnD8B;;AAAA,SAqD/BC,YArD+B,GAqDfC,KAAD,IAAW;AACtB,YAAMC,IAAI,GAAGD,KAAK,CAACvB,MAAN,CAAawB,IAA1B;AACA,YAAMC,KAAK,GAAGF,KAAK,CAACvB,MAAN,CAAa0B,KAA3B;AACA,WAAKC,QAAL,CAAc;AACV,SAACH,IAAD,GAAOC;AADG,OAAd;AAGH,KA3D8B;;AAAA,SA8D/BG,gBA9D+B,GA8DZ,MAAM;AACtB,YAAMC,KAAK,GAAE,wCAAb;AACA,aAAOA,KAAK,CAACC,IAAN,CAAW,KAAK5C,KAAL,CAAWM,QAAtB,CAAP;AACF,KAjE8B;;AAAA,SAmE/BuC,cAnE+B,GAmEd,MAAM;AACnB,aAAO,KAAK7C,KAAL,CAAWM,QAAX,KAAwB,KAAKN,KAAL,CAAWO,eAA1C;AACH,KArE8B;AAAA;;AAuE/BuC,EAAAA,MAAM,GAAG;AAEL,UAAMC,cAAc,GAAG,KAAK/C,KAAL,CAAWM,QAAX,KAAwB,KAAKN,KAAL,CAAWO,eAAnC,GAAqD,iBAArD,GAAyE,sBAAhG;AAGA,WAAO,oBAAC,IAAD;AAAM,MAAA,QAAQ,EAAE,KAAKG,YAArB;AAAmC,MAAA,QAAQ,EAAE,KAAK0B,YAAlD;AAAgE,MAAA,SAAS,EAAC,SAA1E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACH,oBAAC,IAAD,CAAM,KAAN;AAAY,MAAA,KAAK,EAAC,OAAlB;AAA0B,MAAA,IAAI,EAAC,OAA/B;AAAsC,MAAA,IAAI,EAAC,OAA3C;AAAkD,MAAA,EAAE,EAAC,aAArD;AAAmE,MAAA,KAAK,EAAE,KAAKpC,KAAL,CAAWC,KAArF;AAA4F,MAAA,QAAQ,MAApG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADG,EAEH,oBAAC,IAAD,CAAM,KAAN;AAAY,MAAA,KAAK,EAAC,cAAlB;AAAiC,MAAA,IAAI,EAAC,cAAtC;AAAqD,MAAA,KAAK,EAAE,KAAKD,KAAL,CAAWE,YAAvE;AAAqF,MAAA,EAAE,EAAC,oBAAxF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFG,EAGH,oBAAC,IAAD,CAAM,KAAN;AAAY,MAAA,KAAK,EAAC,KAAlB;AAAwB,MAAA,IAAI,EAAC,KAA7B;AAAmC,MAAA,GAAG,EAAC,IAAvC;AAA4C,MAAA,EAAE,EAAC,WAA/C;AAA2D,MAAA,KAAK,EAAE,KAAKF,KAAL,CAAWG,GAA7E;AAAkF,MAAA,IAAI,EAAC,QAAvF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAHG,EAIH,oBAAC,IAAD,CAAM,KAAN;AAAY,MAAA,KAAK,EAAC,QAAlB;AAA2B,MAAA,IAAI,EAAC,QAAhC;AAAyC,MAAA,EAAE,EAAC,cAA5C;AAA2D,MAAA,KAAK,EAAE,KAAKH,KAAL,CAAWI,MAA7E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAJG,EAKH,oBAAC,IAAD,CAAM,KAAN;AAAY,MAAA,KAAK,EAAC,UAAlB;AAA6B,MAAA,IAAI,EAAC,UAAlC;AAA6C,MAAA,EAAE,EAAC,WAAhD;AAA4D,MAAA,KAAK,EAAE,KAAKJ,KAAL,CAAWS,QAA9E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MALG,EAMH,oBAAC,IAAD,CAAM,QAAN;AAAe,MAAA,KAAK,EAAC,KAArB;AAA2B,MAAA,IAAI,EAAC,KAAhC;AAAqC,MAAA,EAAE,EAAC,WAAxC;AAAoD,MAAA,KAAK,EAAE,KAAKT,KAAL,CAAWK,GAAtE;AAA2E,MAAA,QAAQ,MAAnF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MANG,EAOH,oBAAC,IAAD,CAAM,KAAN;AAAY,MAAA,IAAI,EAAC,MAAjB;AAAwB,MAAA,KAAK,EAAC,QAA9B;AAAuC,MAAA,IAAI,EAAC,QAA5C;AAAqD,MAAA,EAAE,EAAC,QAAxD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAPG,EASH,oBAAC,IAAD,CAAM,KAAN;AAAY,MAAA,KAAK,EAAC,gBAAlB;AAAmC,MAAA,IAAI,EAAC,UAAxC;AAAkD,MAAA,IAAI,EAAC,UAAvD;AAAkE,MAAA,EAAE,EAAC,gBAArE;AAAsF,MAAA,KAAK,EAAE,KAAKL,KAAL,CAAWM,QAAxG;AAAkH,MAAA,QAAQ,MAA1H;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MATG,EAUH,oBAAC,IAAD,CAAM,KAAN;AAAY,MAAA,KAAK,EAAEyC,cAAnB;AAAmC,MAAA,IAAI,EAAC,iBAAxC;AAAyD,MAAA,IAAI,EAAC,UAA9D;AAAyE,MAAA,EAAE,EAAC,wBAA5E;AAAqG,MAAA,KAAK,EAAE,KAAK/C,KAAL,CAAWO,eAAvH;AAAwI,MAAA,QAAQ,MAAhJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAVG,EAWH,oBAAC,MAAD;AAAQ,MAAA,IAAI,EAAC,QAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAXG,CAAP;AAaH;;AAzF8B;;AA6FnC,MAAMyC,kBAAkB,GAAIC,QAAD,IAAc;AACjC,SAAO;AAAEhB,IAAAA,cAAc,EAAE,MAAKgB,QAAQ,CAACtD,gBAAgB,EAAjB;AAA/B,GAAP;AACP,CAFD;;AAIA,eAAeC,OAAO,CAAC,IAAD,EAAOoD,kBAAP,CAAP,CAAkCjD,UAAlC,CAAf","sourcesContent":["import React, { Component } from 'react'\nimport { Button, Form } from 'semantic-ui-react'\nimport { fetchCurrentUser } from '../store/actions/users'\nimport { connect } from 'react-redux'\nimport ActiveStorageProvider from \"react-activestorage-provider\";\n\n\nconst SIGN_UP = \"http://localhost:3001/sign_up\"\nclass SignUpForm extends Component {\n\n    state = {\n        email: \"snap@gmail.com\",\n        display_name: \"snap\",\n        age: 90,\n        gender: \"meh\",\n        bio: \"this is the bio\",\n        password: \"12345\",\n        passwordConfirm: \"12345\",\n        looking_for: \"1111\", //default to looking for everything\n        zip_code: \"33332\"\n    }\n\n    handleSubmit = async (e) => {\n        console.log('avatar files', e.target[6].files)\n        const avatar = e.target[6].files\n        const formData = new FormData()\n        var user = {\n          email: this.state.email\n        }\n        console.log('user', user)\n        // formData.append('user', user)\n\n\n        formData.append(\"username\", \"Groucho\");\n        formData.append('email', this.state.email)\n        formData.append('display_name', this.state.display_name)\n        formData.append('age', this.state.age)\n        formData.append('password', this.state.password)\n        formData.append('passwordConfirm', this.state.passwordConfirm)\n        formData.append('looking_for', this.state.looking_for)\n        formData.append('zip_code', this.state.zip_code)\n        formData.append('avatar', avatar)\n        console.log('formData', formData)\n        /* const newUser = {...this.state, avatar: avatar}\n\n        delete newUser.passwordConfirm\n        console.log('check out this new user obje', newUser) */\n        // const payload = {user: formData}\n        console.log('payload', payload)\n        const req = {\n            method: 'POST',\n            body: formData\n        }\n        const resp = await fetch(\"http://localhost:3001/sign_up\", req)\n        const data = await resp.json()\n        console.log(data, data.user, data.token)\n        localStorage.setItem('token', data.token)\n        this.props.getCurrentUser()\n        this.props.history.push('/explore')\n    }\n\n    handleChange = (event) => {\n        const name = event.target.name\n        const input = event.target.value\n        this.setState({\n            [name]:input\n        }, )\n    }\n\n    // validates 8 characters, 1 upper case, 1 lower case, 1 symbol in password\n    validatePassword = () => {\n       const regEx= /^(?=.*[A-Za-z])(?=.*\\d)[A-Za-z\\d]{8,}$/\n       return regEx.test(this.state.password)\n    }\n\n    matchPasswords = () => {\n        return this.state.password === this.state.passwordConfirm\n    }\n\n    render() {\n\n        const passwordsMatch = this.state.password === this.state.passwordConfirm ? \"Passwords match\" : \"Passwords MUST match\"\n\n\n        return <Form onSubmit={this.handleSubmit} onChange={this.handleChange} className=\"ui main\" >\n            <Form.Input label='Email' type='email'name=\"email\"id=\"email-field\" value={this.state.email} required/>\n            <Form.Input label='Display Name' name=\"display_name\" value={this.state.display_name} id='display-name-field'/>\n            <Form.Input label='Age' name=\"age\" min=\"18\" id='age-field' value={this.state.age} type='number'/>\n            <Form.Input label='Gender' name=\"gender\" id='gender-field' value={this.state.gender}/>\n            <Form.Input label='Zip Code' name=\"zip_code\" id='zip-field' value={this.state.zip_code} />\n            <Form.TextArea label=\"Bio\" name=\"bio\"id=\"bio-field\" value={this.state.bio} required />\n            <Form.Input type=\"file\" label=\"Avatar\" name=\"avatar\" id=\"avatar\" />\n\n            <Form.Input label='Enter Password' name=\"password\"type='password' id='password-field' value={this.state.password} required/>\n            <Form.Input label={passwordsMatch} name=\"passwordConfirm\"type='password' id='confirm-password-field' value={this.state.passwordConfirm} required/>\n            <Button type='submit'>Submit</Button>\n        </Form>\n    }\n\n}\n\nconst mapDispatchToProps = (dispatch) => {\n        return { getCurrentUser: ()=> dispatch(fetchCurrentUser())}\n}\n\nexport default connect(null, mapDispatchToProps)(SignUpForm)\n"]},"metadata":{},"sourceType":"module"}