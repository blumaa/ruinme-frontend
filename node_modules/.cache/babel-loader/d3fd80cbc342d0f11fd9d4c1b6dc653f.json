{"ast":null,"code":"import _defineProperty from \"/Users/flatironschool/Development/code/MOD4/ruinme/ruinme-frontend/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nexport const FETCH_USERS = \"FETCH_USERS\";\nexport const getUsers = users => ({\n  type: FETCH_USERS,\n  users\n});\nexport const fetchUsers = () => {\n  return async dispatch => {\n    try {\n      const reqObj = {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: \"Bearer \".concat(localStorage.getItem(\"token\"))\n        }\n      };\n      const response = await fetch(\"http://localhost:3001/users\", reqObj);\n      const json = await response.json();\n      const users = json.data.map(element => {\n        return _objectSpread({}, element.user.data.attributes, {\n          img_url: element.img_url\n        });\n      });\n      dispatch(getUsers(users));\n    } catch (error) {\n      console.error(\"Error fetching users:\", error);\n    }\n  };\n};\nexport const FETCH_PROFILE = \"FETCH_PROFILE\";\nexport const getProfile = user => ({\n  type: FETCH_PROFILE,\n  user\n});\nexport const fetchProfile = id => {\n  return async dispatch => {\n    try {\n      const reqObj = {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: \"Bearer \".concat(localStorage.getItem(\"token\"))\n        }\n      };\n      const response = await fetch(\"http://localhost:3001/users/\" + id, reqObj);\n      const json = await response.json();\n\n      const profile = _objectSpread({}, json.data.data.attributes, {\n        img_url: json.img_url\n      });\n\n      dispatch(getProfile(profile));\n    } catch (error) {\n      console.error(\"Error fetching user:\", error);\n    }\n  };\n};\nexport const emptyProfile = () => ({\n  type: \"EMPTY_PROFILE\"\n});\nexport const FETCH_AUTH = \"FETCH_AUTH\";\nexport const getCurrentUser = current_user => ({\n  type: FETCH_AUTH,\n  current_user\n});\nexport const fetchCurrentUser = () => {\n  return async dispatch => {\n    try {\n      const reqObj = {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: \"Bearer \".concat(localStorage.getItem(\"token\"))\n        }\n      };\n      const response = await fetch(\"http://localhost:3001/profile\", reqObj);\n      const json = await response.json();\n\n      const profile = _objectSpread({}, json.user.attributes, {\n        img_url: json.img_url\n      });\n\n      console.log(json);\n      dispatch(getCurrentUser(profile));\n    } catch (error) {\n      console.error(\"Error fetching user:\", error);\n    }\n  };\n};\nexport const setShowRelationship = relationship => ({\n  type: \"SET_SHOW_RELATIONSHIP\",\n  relationship\n});","map":{"version":3,"sources":["/Users/flatironschool/Development/code/MOD4/ruinme/ruinme-frontend/src/store/actions/users.js"],"names":["FETCH_USERS","getUsers","users","type","fetchUsers","dispatch","reqObj","method","headers","Authorization","localStorage","getItem","response","fetch","json","data","map","element","user","attributes","img_url","error","console","FETCH_PROFILE","getProfile","fetchProfile","id","profile","emptyProfile","FETCH_AUTH","getCurrentUser","current_user","fetchCurrentUser","log","setShowRelationship","relationship"],"mappings":"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","sourcesContent":["export const FETCH_USERS = \"FETCH_USERS\";\n\nexport const getUsers = users => ({ type: FETCH_USERS, users });\nexport const fetchUsers = () => {\n  return async dispatch => {\n    try {\n      const reqObj = {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${localStorage.getItem(\"token\")}`\n        }\n      };\n      const response = await fetch(\"http://localhost:3001/users\", reqObj);\n      const json = await response.json();\n      const users = json.data.map(element => {return{...element.user.data.attributes, img_url: element.img_url}} );\n      dispatch(getUsers(users));\n    } catch (error) {\n      console.error(\"Error fetching users:\", error);\n    }\n  };\n};\n\nexport const FETCH_PROFILE = \"FETCH_PROFILE\";\n\nexport const getProfile = user => ({ type: FETCH_PROFILE, user });\nexport const fetchProfile = id => {\n  return async dispatch => {\n    try {\n      const reqObj = {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${localStorage.getItem(\"token\")}`\n        }\n      };\n      const response = await fetch(\"http://localhost:3001/users/\" + id, reqObj);\n      const json = await response.json();\n      const profile = {...json.data.data.attributes, img_url: json.img_url};\n      dispatch(getProfile(profile));\n    } catch (error) {\n      console.error(\"Error fetching user:\", error);\n    }\n  };\n};\n\nexport const emptyProfile = () => ({\n  type: \"EMPTY_PROFILE\"\n});\n\n\nexport const FETCH_AUTH = \"FETCH_AUTH\";\n\nexport const getCurrentUser = current_user => ({\n  type: FETCH_AUTH,\n  current_user\n});\nexport const fetchCurrentUser = () => {\n  return async dispatch => {\n    try {\n      const reqObj = {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${localStorage.getItem(\"token\")}`\n        }\n      };\n      const response = await fetch(\"http://localhost:3001/profile\", reqObj);\n      const json = await response.json();\n      const profile = {...json.user.attributes, img_url: json.img_url};\n\n      console.log(json)\n      dispatch(getCurrentUser(profile));\n    } catch (error) {\n      console.error(\"Error fetching user:\", error);\n    }\n  };\n};\n\n\nexport const setShowRelationship = relationship => ({\n  type: \"SET_SHOW_RELATIONSHIP\",\n  relationship\n});\n"]},"metadata":{},"sourceType":"module"}