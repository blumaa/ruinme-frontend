{"ast":null,"code":"var _jsxFileName = \"/Users/flatironschool/Development/code/MOD4/ruinme/ruinme-frontend/src/components/SignUpForm.jsx\";\nimport React, { Component } from 'react';\nimport { Button, Form } from 'semantic-ui-react';\nimport { fetchCurrentUser } from '../store/actions/users';\nimport { connect } from 'react-redux';\nimport ActiveStorageProvider from \"react-activestorage-provider\";\nconst SIGN_UP = \"http://localhost:3001/users\";\n\nclass SignUpForm extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      email: \"\",\n      display_name: \"\",\n      age: 0,\n      password: \"\",\n      passwordConfirm: \"\",\n      looking_for: \"1111\",\n      //default to looking for everything\n      zip_code: \"\"\n    };\n\n    this.handleSubmit = async () => {\n      const newUser = this.state;\n      delete newUser.passwordConfirm;\n      console.log(newUser);\n      const payload = JSON.stringify({\n        user: newUser\n      });\n      const req = {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: payload\n      };\n      console.log(newUser);\n      const resp = await fetch(SIGN_UP, req);\n      const data = await resp.json();\n      console.log(data, data.user, data.token);\n      localStorage.setItem('token', data.token);\n      this.props.getCurrentUser();\n      this.props.history.push('/explore');\n    };\n\n    this.handleChange = event => {\n      const name = event.target.name;\n      const input = event.target.value;\n      this.setState({\n        [name]: input\n      });\n    };\n\n    this.validatePassword = () => {\n      const regEx = /^(?=.*[A-Za-z])(?=.*\\d)[A-Za-z\\d]{8,}$/;\n      return regEx.test(this.state.password);\n    };\n\n    this.matchPasswords = () => {\n      return this.state.password === this.state.passwordConfirm;\n    };\n  }\n\n  render() {\n    const passwordsMatch = this.state.password === this.state.passwordConfirm ? \"Passwords match\" : \"Passwords MUST match\";\n    return React.createElement(Form, {\n      onSubmit: this.handleSubmit,\n      onChange: this.handleChange,\n      className: \"ui main\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    }, React.createElement(Form.Input, {\n      label: \"Email\",\n      type: \"email\",\n      name: \"email\",\n      id: \"email-field\",\n      required: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }), React.createElement(Form.Input, {\n      label: \"Display Name\",\n      name: \"display_name\",\n      id: \"display-name-field\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }), React.createElement(Form.Input, {\n      label: \"Age\",\n      name: \"age\",\n      min: \"18\",\n      id: \"age-field\",\n      type: \"number\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }), React.createElement(Form.Input, {\n      label: \"Gender\",\n      name: \"gender\",\n      id: \"gender-field\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    }), React.createElement(Form.Input, {\n      label: \"Zip Code\",\n      name: \"zip_code\",\n      id: \"zip-field\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }), React.createElement(Form.TextArea, {\n      label: \"Bio\",\n      name: \"bio\",\n      id: \"bio-field\",\n      required: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }), React.createElement(ActiveStorageProvider, {\n      endpoint: {\n        path: \"/users\",\n        model: \"User\",\n        attribute: \"avatar\",\n        method: \"POST\"\n      },\n      onSubmit: user => this.setState({\n        avatar: user.avatar\n      }),\n      render: ({\n        handleUpload,\n        uploads,\n        ready\n      }) => React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"file\",\n        disabled: !ready,\n        onChange: e => handleUpload(e.currentTarget.files),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }), uploads.map(upload => {\n        switch (upload.state) {\n          case \"waiting\":\n            return React.createElement(\"p\", {\n              key: upload.id,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 95\n              },\n              __self: this\n            }, \"Waiting to upload \", upload.file.name);\n\n          case \"uploading\":\n            return React.createElement(\"p\", {\n              key: upload.id,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 101\n              },\n              __self: this\n            }, \"Uploading \", upload.file.name, \": \", upload.progress, \"%\");\n\n          case \"error\":\n            return React.createElement(\"p\", {\n              key: upload.id,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 107\n              },\n              __self: this\n            }, \"Error uploading \", upload.file.name, \": \", upload.error);\n\n          case \"finished\":\n            return React.createElement(\"p\", {\n              key: upload.id,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 113\n              },\n              __self: this\n            }, \"Finished uploading \", upload.file.name);\n        }\n      })),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }), React.createElement(Form.Input, {\n      label: \"Enter Password\",\n      name: \"password\",\n      type: \"password\",\n      id: \"password-field\",\n      required: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }), React.createElement(Form.Input, {\n      label: passwordsMatch,\n      name: \"passwordConfirm\",\n      type: \"password\",\n      id: \"confirm-password-field\",\n      required: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }), React.createElement(Button, {\n      type: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, \"Submit\"));\n  }\n\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    getCurrentUser: () => dispatch(fetchCurrentUser())\n  };\n};\n\nexport default connect(null, mapDispatchToProps)(SignUpForm);","map":{"version":3,"sources":["/Users/flatironschool/Development/code/MOD4/ruinme/ruinme-frontend/src/components/SignUpForm.jsx"],"names":["React","Component","Button","Form","fetchCurrentUser","connect","ActiveStorageProvider","SIGN_UP","SignUpForm","state","email","display_name","age","password","passwordConfirm","looking_for","zip_code","handleSubmit","newUser","console","log","payload","JSON","stringify","user","req","method","headers","body","resp","fetch","data","json","token","localStorage","setItem","props","getCurrentUser","history","push","handleChange","event","name","target","input","value","setState","validatePassword","regEx","test","matchPasswords","render","passwordsMatch","path","model","attribute","avatar","handleUpload","uploads","ready","e","currentTarget","files","map","upload","id","file","progress","error","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport { Button, Form } from 'semantic-ui-react'\nimport { fetchCurrentUser } from '../store/actions/users'\nimport { connect } from 'react-redux'\nimport ActiveStorageProvider from \"react-activestorage-provider\";\n\n\nconst SIGN_UP = \"http://localhost:3001/users\"\nclass SignUpForm extends Component {\n\n\n    state = {\n        email: \"\",\n        display_name: \"\",\n        age: 0,\n        password: \"\",\n        passwordConfirm: \"\",\n        looking_for: \"1111\", //default to looking for everything\n        zip_code: \"\"\n    }\n\n\n    handleSubmit = async () => {\n\n        const newUser = this.state\n        delete newUser.passwordConfirm\n        console.log(newUser)\n        const payload = JSON.stringify({user: newUser})\n        const req = {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: payload\n        }\n        console.log(newUser)\n        const resp = await fetch(SIGN_UP, req)\n        const data = await resp.json()\n        console.log(data, data.user, data.token)\n        localStorage.setItem('token', data.token)\n        this.props.getCurrentUser()\n        this.props.history.push('/explore')\n    }\n\n    handleChange = (event) => {\n        const name = event.target.name\n        const input = event.target.value\n        this.setState({\n            [name]:input\n        }, )\n    }\n\n    // validates 8 characters, 1 upper case, 1 lower case, 1 symbol in password\n    validatePassword = () => {\n       const regEx= /^(?=.*[A-Za-z])(?=.*\\d)[A-Za-z\\d]{8,}$/\n       return regEx.test(this.state.password)\n    }\n\n    matchPasswords = () => {\n        return this.state.password === this.state.passwordConfirm\n    }\n\n    render() {\n\n        const passwordsMatch = this.state.password === this.state.passwordConfirm ? \"Passwords match\" : \"Passwords MUST match\"\n\n\n        return <Form onSubmit={this.handleSubmit} onChange={this.handleChange} className=\"ui main\" >\n            <Form.Input label='Email' type='email'name=\"email\"id=\"email-field\" required/>\n            <Form.Input label='Display Name' name=\"display_name\"id='display-name-field'/>\n            <Form.Input label='Age' name=\"age\" min=\"18\" id='age-field' type='number'/>\n            <Form.Input label='Gender' name=\"gender\" id='gender-field'/>\n            <Form.Input label='Zip Code' name=\"zip_code\" id='zip-field' />\n            <Form.TextArea label=\"Bio\" name=\"bio\"id=\"bio-field\" required/>\n            <ActiveStorageProvider\n              endpoint={{\n                path: \"/users\",\n                model: \"User\",\n                attribute: \"avatar\",\n                method: \"POST\"\n              }}\n              onSubmit={user => this.setState({ avatar: user.avatar })}\n              render={({ handleUpload, uploads, ready }) => (\n                <div>\n                  <input\n                    type=\"file\"\n                    disabled={!ready}\n                    onChange={e => handleUpload(e.currentTarget.files)}\n                  />\n\n                  {uploads.map(upload => {\n                    switch (upload.state) {\n                      case \"waiting\":\n                        return (\n                          <p key={upload.id}>\n                            Waiting to upload {upload.file.name}\n                          </p>\n                        );\n                      case \"uploading\":\n                        return (\n                          <p key={upload.id}>\n                            Uploading {upload.file.name}: {upload.progress}%\n                          </p>\n                        );\n                      case \"error\":\n                        return (\n                          <p key={upload.id}>\n                            Error uploading {upload.file.name}: {upload.error}\n                          </p>\n                        );\n                      case \"finished\":\n                        return (\n                          <p key={upload.id}>\n                            Finished uploading {upload.file.name}\n                          </p>\n                        );\n                    }\n                  })}\n                </div>\n              )}\n            />\n\n            <Form.Input label='Enter Password' name=\"password\"type='password' id='password-field' required/>\n            <Form.Input label={passwordsMatch} name=\"passwordConfirm\"type='password' id='confirm-password-field' required/>\n            <Button type='submit'>Submit</Button>\n        </Form>\n    }\n\n}\n\nconst mapDispatchToProps = (dispatch) => {\n        return { getCurrentUser: ()=> dispatch(fetchCurrentUser())}\n}\n\nexport default connect(null, mapDispatchToProps)(SignUpForm)\n"]},"metadata":{},"sourceType":"module"}